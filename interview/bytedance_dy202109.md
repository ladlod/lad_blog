# 字节抖音后端面经
## 一面(2021.9.7）
### 1. 自我介绍、项目介绍
### 2. 项目选型为什么用zset
    审核场景需要一个可靠的有序队列
### 3. zset的底层数据结构
    跳表+哈希表、压缩列表
### 4. redis的数据持久化原理，怎么选型
    rdb 另外一个线程定时持久化 特点：性能好
    aof 记录所有redis请求日志 特点：容灾好
    对数据可靠性要求高，修改频率低的用aof，可靠性要求低，修改频率高的用rdb
### 5. 项目redis选型为缓存型还是持久型
    因为是审核场景，数据需要持久化，所以是持久型
### 6. redis数据过期算法
    lru：最久未使用的先过期
    lfu：使用次数最少的先过期
    key淘汰机制：惰性过期（下次访问时判断是否过期，过期再删除）+定时删除（定时任务check过期的key并删除）
### 7. mysql除了分库分表优化思路
    查询慢日志，explian看是否命中索引，修改sql或优化索引
    以下情况sql无法命中索引：'!=', 'in', like以'%'开头
### 8. 令牌桶算法具体指什么
    定时向桶内匀速放入令牌，接口每次请求取出一块令牌，桶空则拒绝或延迟请求
### 9. 项目中怎么应用到的令牌桶算法
    广告匀速投放
### 10. 手撕代码
    [k个一组反转链表](https://leetcode-cn.com/problems/reverse-nodes-in-k-group/)变形，从后向前反转
    做过原题所以思路正确，但手撕链表编码过程中因为面试较紧张，边界情况没考虑清除，实现了很多次才ac，共用了半个小时左右，手撕代码之前面试官感觉还比较满意，之后感觉面试官脸色不太好。
### 11. 思路题
    [二叉搜索树查第k个数](https://leetcode-cn.com/problems/kth-smallest-element-in-a-bst/)
    我 中序遍历，遍历到第k次返回
    面试官 时间复杂度
    我 O(k) (此处有错误，应该是O(logn+k)，没有考虑到中序遍历需要先遍历一次树的层数)
    面试官 可以做到O(logk)吗
    我 没想到解法
    面试官 没关系，这个可以不了解
### 12. rabbit-mq的事务了解吗
    答了消息消费的ack机制，面试官问还有其它的么，实话说了对rabbit-mq原理不是很了解
### 13. mysql的索引怎么实现的，为什么不用红黑树
    b+树
    红黑树二叉，b+树多叉，搜索效率高
    红黑树节点存储数据，b+树节点不存储数据，节省空间
    b+树分片存储，范围查询性能更好
### 没有反问环节，直接结束面试，总结
    面试的部门不是做广告的，项目经历面试官不了解，没有深入挖。
    手撕代码虽然做过原题，但是手撕链表不熟悉，做的太慢，对面试评分有很大影响。
    面试当天晚上hr反馈面试通过。